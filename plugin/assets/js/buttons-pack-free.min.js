/*!
 * Social Locker buttons pack - v1.0.2, 2017-12-21 
 * for Social Locker platform: Learn more: http://byonepress.com, https://sociallocker.org 
 * In Russian: https://sociallocker.ru 
 * 
 * Copyright 2017, Alex Kovalev <alex.kovalevv@gmail.com> 
 * Webcraftic (c) 2017 
 * Support:  
 * 
 * This modification extends the package of social buttons.
*/
!function(a){"use strict";if(!a.pandalocker||!a.pandalocker.entity||!a.pandalocker.entity.socialButton)throw new Error("[Ошибка]: Не подключен основной плагин.");var b=a.pandalocker.tools.extend(a.pandalocker.entity.socialButton);b._callback=function(a){"loaded"===a.event&&this.button.addClass("onp-button-loaded"),("click"===a.event||"processing"===a.event)&&this.showScreen("data-processing"),this._extendCallback&&this._extendCallback(a)},a.pandalocker.entity.socialButtonsPack=b}(__$onp);
!function(a){"use strict";if(!a.pandalocker||!a.pandalocker.sdk)throw new Error("[Ошибка]: Не подключен основной плагин.");a.pandalocker.sdk.mail=a.pandalocker.sdk.mail||{name:"mail",url:"//connect.mail.ru/js/loader.js",scriptId:"mail-jssdk",hasParams:!0,isRender:!0,timeout:1e4,isLoaded:function(){return window.mailru&&"object"==typeof window.mailru},prepare:function(){var b=function(b){(b||b.data)&&("string"==typeof b.data&&-1!==b.data.indexOf("event=plugin.liked")&&a(document).trigger("onp-sl-mail-share"),"string"==typeof b.data&&-1!==b.data.indexOf("event=plugin.unliked")&&a(document).trigger("onp-sl-mail-unlike"))};window.addEventListener?window.addEventListener("message",b,!1):window.attachEvent("onmessage",b)},createEvents:function(){var b=this,c=this.isLoaded(),d=function(){a(document).trigger(b.name+"-init")};return c?void d():void a(document).bind("mail-script-loaded",function(){d()})}}}(__$onp);
!function(a){"use strict";if(!a.pandalocker||!a.pandalocker.sdk)throw new Error("[Ошибка]: Не подключен основной плагин.");a.pandalocker.sdk.ok=a.pandalocker.sdk.ok||{name:"ok",url:"//connect.ok.ru/connect.js",scriptId:"ok-jssdk",hasParams:!0,isRender:!0,timeout:1e4,isLoaded:function(){return"object"==typeof window.OK},createEvents:function(){var b=this,c=this.isLoaded(),d=function(){a(document).trigger(b.name+"-init")};return c?void d():void a(document).bind("ok-script-loaded",function(){d()})}}}(__$onp);
!function(a){"use strict";if(!a.pandalocker||!a.pandalocker.sdk)throw new Error("[Ошибка]: Не подключен основной плагин.");a.pandalocker.sdk.onp=a.pandalocker.sdk.onp||{name:"onp",url:"//cdn.sociallocker.ru/service/ifbcreator.js",scriptId:"onp-jssdk",hasParams:!0,isRender:!0,timeout:1e4,isLoaded:function(){return window.ONPWGT&&"object"==typeof window.ONPWGT},prepare:function(){this.url=this.options.globalOptions.debug&&this.options.globalOptions.debugOptions?this.options.globalOptions.debugOptions.onpSdkUrl:this.url},createEvents:function(){var b=this,c=this.isLoaded(),d=function(){a(document).trigger(b.name+"-init")};if(c)return void d();if(window.onpwgt___asyncInit)var e=window.onpwgt___asyncInit;window.onpwgt___asyncInit=function(){d(),e&&e(),window.onpwgt___asyncInit=function(){}}}}}(__$onp);
!function(a){"use strict";if(a.pandalocker.data||(a.pandalocker.data={}),a.pandalocker.data.__mailShareUrl=null,!(a.pandalocker&&a.pandalocker.sdk&&a.pandalocker.controls&&a.pandalocker.entity))throw new Error("[Ошибка]: Не подключен основной плагин.");a.pandalocker.mail_share||(a.pandalocker.mail_share={});var b=a.pandalocker.tools.extend(a.pandalocker.entity.socialButton);b.name="mail-share",b.sdk="mail",b.buttonCounterBuffer=0,b.taskcheckShared=0,b.useButtonFrameId=null,b._defaults={pageUrl:null,pageTitle:null,pageDescription:null,pageImage:null,counter:!0,clickja:!0},b._extractUrl=function(){var b=new a.pandalocker.tools.uri(this.options.pageUrl||this.networkOptions.url||window.location.href);return b.normalize().toString()},b.prepareOptions=function(){a.pandalocker.browser&&a.pandalocker.browser.YaBrowser&&(this.options.clickja=!1),this.url=this._extractUrl(),this.options.counter="vertical"===this.groupOptions.layout?!0:this.groupOptions.counters,this.options.title=this.options.title||a.pandalocker.lang.socialButtons.mailShare},b.verification={container:"iframe",timeout:5e3},b.setupEvents=function(){var b=this;a(document).bind("onp-sl-mail-share",function(){b.url===a.pandalocker.data.__mailShareUrl&&b.unlock("button",b.name,b.url)}),a(document).bind("onp-sl-mail-unlike",function(){b.url===a.pandalocker.data.__mailShareUrl&&b.showNotice(a.pandalocker.lang.alerts.social_unshare)})},b.renderButton=function(b){var c=this,d="//connect.mail.ru/share?url="+c.url+(c.options.pageTitle?"&amp;title="+encodeURIComponent(c.options.pageTitle):"")+(c.options.pageDescription?"&amp;description="+encodeURIComponent(c.options.pageDescription):"")+(c.options.pageImage?"&amp;image_url="+a.pandalocker.tools.uri(c.options.pageImage).normalize().toString():""),e={cm:"1",sz:"20",st:"2",tp:"mm"};this.options.counter||(e.nc=1),"vertical"===this.groupOptions.layout&&(e.vt=1),c.button=a('<div><a target="_blank" class="mrc__plugin_uber_like_button" href="'+d+'">Нравится</a></div>').appendTo(b),c.button.data("url",c.url),c.button.find("a").attr("data-mrc-config",JSON.stringify(e)),mailru&&mailru.loader&&mailru.loader.require("api",function(){mailru.plugin.init()}),c.button.hover(function(){a.pandalocker.data.__mailShareUrl=a(this).data("url")});try{}catch(f){console.log(f)}},a.pandalocker.controls["social-buttons"]["mail-share"]=b}(__$onp);
!function(a){"use strict";if(!(a.pandalocker&&a.pandalocker.sdk&&a.pandalocker.controls&&a.pandalocker.entity))throw new Error("[Ошибка]: Не подключен основной плагин.");var b=a.pandalocker.tools.extend(a.pandalocker.entity.socialButton);b.name="ok-share",b.sdk="ok",b._defaults={url:null,style:{width:120,height:30,st:"rounded",sz:20,ck:1},counter:!0,title:a.pandalocker.lang.socialButtons.okShare},b._extractUrl=function(){var b=new a.pandalocker.tools.uri(this.options.url||this.networkOptions.url||window.location.href);return b.normalize().toString()},b.prepareOptions=function(){this.url=this._extractUrl(),"vertical"===this.groupOptions.layout&&(this.options.style.vt=1,this.options.style.width=70,this.options.style.height=50),this.options.counter="vertical"===this.groupOptions.layout?!0:this.groupOptions.counters,this.options.title=this.options.title||a.pandalocker.lang.socialButtons.okShare},b.verification={container:"iframe",timeout:1e4},b.setupEvents=function(){},b.onShare=function(a){if(a.originalEvent.origin&&-1!==a.originalEvent.origin.indexOf("ok")){var b=a.originalEvent.data.split("$");"ok_shared"===b[0]&&this.unlock("button",this.name,this.url)}},b.renderButton=function(b){var c=this,d="onp-sl-ok-share-"+Math.floor(999999*Math.random()+1);c.button=a("<div></div>").appendTo(b),c.button.attr("id",d),this.options.counter||(c.options.style.width=70,c.options.style.nc=1);var e=setInterval(function(){return a("#"+d).length?(window.OK.CONNECT.insertShareWidget(d,c.url,JSON.stringify(c.options.style)),clearInterval(e),!1):void 0},1e3);a(window).on("message onmessage",function(a){c.onShare(a)})},a.pandalocker.controls["social-buttons"]["ok-share"]=b}(__$onp);
!function(a){"use strict";if(!(a.pandalocker&&a.pandalocker.sdk&&a.pandalocker.controls&&a.pandalocker.entity))throw new Error("[Ошибка]: Не подключен основной плагин.");a.pandalocker.data||(a.pandalocker.data={}),a.pandalocker.data.__facebookLikeButton=null;var b=a.pandalocker.tools.extend(a.pandalocker.entity.socialButtonsPack);b.name="facebook-like",b.sdk="onp",b.verification.container=".onp-button-loaded",b._defaults={url:null,tooltipText:a.pandalocker.lang.errors.facebookLikeAlertText,layout:"button_count"},b.prepareOptions=function(){this.url=this._extractUrl(),this.options.title=this.options.title||a.pandalocker.lang.socialButtons.facebookLike,this.options.counter="vertical"===this.groupOptions.layout?!0:this.groupOptions.counters},b.setupEvents=function(){},b._extendCallback=function(b){if("liked"===b.event){var c=new a.pandalocker.tools.uri(b.url);if(this.url!==c.normalize().toString())return;this.unlock("button",this.name,this.url,b.other_info)}"unliked"===b.event&&this.showNotice(a.pandalocker.lang.alerts.social_unshare)},b.renderButton=function(b){var c=this;this.button=a("<div></div>").appendTo(b),this.widgetId="onp-fb-like-widget-id"+Math.floor(999999*Math.random()+1),this.button.attr("id",this.widgetId),b.addClass("onp-sl-iframe-button"),window.ONPWGT&&window.ONPWGT.init(this.widgetId,"facebook-like",{href:this.url,counter:this.options.counter,layout:this.groupOptions.layout,lang:this.groupOptions.lang},function(a){c._callback(a)})},a.pandalocker.controls["social-buttons"]["facebook-like"]=b}(__$onp);
!function(a){"use strict";if(!(a.pandalocker&&a.pandalocker.sdk&&a.pandalocker.controls&&a.pandalocker.entity))throw new Error("[Ошибка]: Не подключен основной плагин.");var b=a.pandalocker.tools.extend(a.pandalocker.entity.socialButtonsPack);b.name="facebook-share",b.sdk="onp",b.verification.container=".onp-button-loaded",b._defaults={url:null,layout:"button_count",count:"standard",lang:"en_US",width:null,shareDialog:!1,name:null,caption:null,description:null,image:null},b.prepareOptions=function(){this.url=this._extractUrl(),this.options.title=this.options.title||a.pandalocker.lang.socialButtons.facebookShare,this.options.counter="vertical"===this.groupOptions.layout?!0:this.groupOptions.counters},b.setupEvents=function(){},b._extendCallback=function(b){if("loaded"===b.event&&this.button.addClass("onp-button-loaded"),"notshared"===b.event&&(this.showScreen("default"),this.showNotice(a.pandalocker.lang.alerts.social_share_aborted)),("click"===b.event||"processing"===b.event)&&this.showScreen("data-processing"),"error"===b.event){if(b.message)this.showNotice(b.message);else if(b.code){var c=a.pandalocker.lang.errors[b.code];this.showNotice(c)}this.showScreen("default")}if("shared"===b.event){var d=new a.pandalocker.tools.uri(b.url);if(this.url!==d.normalize().toString())return;this.unlock("button",this.name,this.url,b.other_info)}},b.renderButton=function(b){var c=this;this.button=a("<div></div>").appendTo(b),this.widgetId="onp-fb-share-widget-id"+Math.floor(999999*Math.random()+1),this.button.attr("id",this.widgetId),b.addClass("onp-sl-iframe-button"),window.ONPWGT&&window.ONPWGT.init(this.widgetId,"facebook-share",{url:this.url,ref:this.options.ref,counter:this.options.counter,layout:this.groupOptions.layout,lang:this.groupOptions.lang,title:this.options.name,caption:this.options.caption,description:this.options.description,image:this.options.image},function(a){c._callback(a)})},a.pandalocker.controls["social-buttons"]["facebook-share"]=b}(__$onp);
!function(a){"use strict";if(!(a.pandalocker&&a.pandalocker.sdk&&a.pandalocker.controls&&a.pandalocker.entity))throw new Error("[Ошибка]: Не подключен основной плагин.");a.pandalocker.vk_like||(a.pandalocker.vk_like={});var b=a.pandalocker.tools.extend(a.pandalocker.entity.socialButtonsPack);b.name="vk-like",b.sdk="onp",b.verification.container=".onp-button-loaded",b._defaults={type:"mini",pageTitle:null,pageDescription:null,pageUrl:null,pageImage:null,pageId:null,verb:0,requireSharing:1},b._extractUrl=function(){var a=this.options.pageUrl||this.networkOptions.url||window.location.href;return this.urlPrepare(a)},b.urlPrepare=function(b){var c=new a.pandalocker.tools.uri(b);return c.normalize().toString()},b.prepareOptions=function(){this.url=this._extractUrl(),"vertical"===this.groupOptions.layout&&(this.options.type="vertical"),this.options.counter="vertical"===this.groupOptions.layout?!0:this.groupOptions.counters,this.options.title=this.options.title||a.pandalocker.lang.socialButtons.vkLike},b.setupEvents=function(){},b._extendCallback=function(b){b.userInfo;if(!this.options.requireSharing&&"liked"===b.event){if(this.url!==this.urlPrepare(b.url))return;this.unlock("button",this.name,this.url)}if("shared"===b.event){if(this.url!==this.urlPrepare(b.url))return;this.unlock("button",this.name,this.url)}"unliked"===b.event&&this.showNotice(a.pandalocker.lang.alerts.social_unshare)},b.renderButton=function(b){var c=this;this.button=a("<div></div>").appendTo(b),this.widgetId="onp-vk-like-widget-"+Math.floor(999999*Math.random()+1),this.button.attr("id",this.widgetId),b.addClass("onp-sl-iframe-button"),window.ONPWGT&&window.ONPWGT.init(this.widgetId,"vk-like",{type:this.options.type,pageTitle:this.options.pageTitle,pageDescription:this.options.pageDescription,pageUrl:this.url,pageImage:this.options.pageImage,pageId:this.options.pageId,counter:this.options.counter,verb:this.options.verb},function(a){c._callback(a)})},a.pandalocker.controls["social-buttons"]["vk-like"]=b}(__$onp);
!function(a){"use strict";if(!(a.pandalocker&&a.pandalocker.groups&&a.pandalocker.groups["social-buttons"]&&a.pandalocker.groups["social-buttons"]._defaults))throw new Error("[Ошибка]: Не подключен основной плагин.");a.pandalocker.groups["social-buttons"]._defaults.vk={like:{},share:{},subscribe:{}},a.pandalocker.groups["social-buttons"]._defaults.ok={share:{}},a.pandalocker.groups["social-buttons"]._defaults.mail={share:{}},a.pandalocker.groups["social-buttons"]._defaults.google.youtube={},a.pandalocker.groups["social-buttons"]._defaults.youtube&&delete a.pandalocker.groups["social-buttons"]._defaults.youtube,a.pandalocker.hooks.add("opanda-social-buttons-group-filter-options",function(b,c){return c.options.vk&&(b.vk=a.extend(!0,b.vk,c.options.vk)),c.options.ok&&(b.ok=a.extend(!0,b.ok,c.options.ok)),c.options.mail&&(b.mail=a.extend(!0,b.mail,c.options.mail)),c.options.draugiem&&(b.draugiem=a.extend(!0,b.draugiem,c.options.draugiem)),c.options.instagram&&(b.instagram=a.extend(!0,b.instagram,c.options.instagram)),c.options.livejournal&&(b.livejournal=a.extend(!0,b.livejournal,c.options.livejournal)),b}),a.pandalocker.hooks.add("opanda-google-analytics-button-name-filter",function(a,b,c){return"google-youtube"===c?a="Google Youtube":"vk-share"===c?a="Vkontakte Share":"vk-like"===c?a="Vkontakte Like":"vk-subscribe"===c?a="Vkontakte Subscribe":"vk-notify"===c?a="Vkontakte Get notify":"ok-share"===c?a="Odnoklassniki Share":"mail-share"===c?a="Mail Share":"draugiem"===c?a="Draugiem share":"instagram"===c?a="Instagram subscribe":"vk"===c&&(a="Vkontakte Sign-In"),a})}(__$onp);